"use strict";angular.module("sbAdminApp").controller("ticketController",["$modal","$scope","ticketService","$log",function($modal,$scope,ticketService,$log){var updatePaginationInfo=function(){$scope.pagination={totalItems:$scope.tickets.length,maxVisiblePageLinks:5,currentPage:1,pageSize:10}};$scope.getTickets=function(){ticketService.getTickets().then(function(response){$scope.tickets=response})},$scope.getTickets(),$scope.addTicket=function(){var modalInstance=$modal.open({templateUrl:"views/dashboard/addTicket.html",controller:"addTicketInstanceController",size:"md",resolve:{selectedTicket:function(){return $scope.addTicket}}});modalInstance.result.then(function(ticket){updatePaginationInfo()},function(ticket){$log.info("Modal dismissed at: "+new Date)})},$scope.updateTicket=function(ticket){var modalInstance=$modal.open({templateUrl:"views/dashboard/updateTicket.html",controller:"addTicketInstanceController",size:"md",resolve:{selectedTicket:function(){return angular.copy(ticket)}}});modalInstance.result.then(function(ticket){},function(city){$log.info("Modal dismissed at: "+new Date)})}}]),angular.module("sbAdminApp").controller("addTicketInstanceController",["ticketService","selectedTicket","$state","$scope","$modalInstance","$http","$modal","$log",function(ticketService,selectedTicket,$state,$scope,$modalInstance,$http,$modal,$log){$scope.ticket=selectedTicket,$scope.getModules=function(){ticketService.getModules().then(function(response){$scope.modules=response})},$scope.getStatus=function(){ticketService.getStatus().then(function(response){$scope.status=response})},$scope.getResolutions=function(){ticketService.getResolution().then(function(response){$scope.resolutions=response})},$scope.getCustomers=function(){ticketService.getCustomers().then(function(response){$scope.customers=response})},$scope.getUsers=function(){ticketService.getUsers().then(function(response){$scope.users=response})},$scope.getModules(),$scope.getStatus(),$scope.getResolutions(),$scope.getCustomers(),$scope.getUsers(),$scope.updateOrCreate=function(ticket,isCreate){isCreate||(ticket.comments.push(ticket.tempComment),delete ticket.tempComment),ticketService.createTicket(ticket).then(function(data,response,headers){console.log("checking the data "+data),$modalInstance.close(data)},function(data,response){})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]);